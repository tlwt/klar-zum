<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>PDF Form Filler</title></head>
<body>
<button id="fillBtn">PDF ausfüllen</button>

<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<script>
async function fillPdf() {
  const bytes = await fetch('test.pdf').then(r => r.arrayBuffer());
  const pdfDoc = await PDFLib.PDFDocument.load(bytes);
  const form   = pdfDoc.getForm();

  const txt = (n,v) => { try{ form.getTextField(n).setText(v); }catch{} };

  txt('Nachname','Mustermann');
  txt('Vorname','Max');
  txt('Geburtsdatum','01.01.1980');
  txt('Adresse','Beispielstraße 1, 12345 Musterstadt');
  txt('Datum','01.06.2025');

  try{ form.getCheckBox('Strafverfahren').check(); }catch{}

  form.getFields().forEach(f => {
    if (f instanceof PDFLib.PDFTextField)      f.setText('Beispiel');
    else if (f instanceof PDFLib.PDFCheckBox)  f.check();
    else if (f instanceof PDFLib.PDFRadioGroup){
      const o=f.getOptions(); if(o.length) f.select(o[0]);
    }
    else if (f instanceof PDFLib.PDFDropdown){
      const o=f.getOptions();
      const target = o.find(v => /übung|uebung/i.test(v)) || o[0];
      if (target) f.select(target);
    }
    else if (f instanceof PDFLib.PDFOptionList){
      const o=f.getOptions(); if(o.length) f.select(o[0]);
    }
  });

  const pdfBytes = await pdfDoc.save();
  saveAs(new Blob([pdfBytes], {type:'application/pdf'}), 'test-filled.pdf');
}
document.getElementById('fillBtn').addEventListener('click', fillPdf);
</script>
</body>
</html>